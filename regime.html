<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.2/math.js"></script>
<style>
.bt-info
{
 --bs-btn-padding-y: .05rem;
 --bs-btn-padding-x: .4rem;
 --bs-btn-font-size: .7rem;
 margin-left: 0.3rem;
}

.invisible
{
 opacity: 0;
 transition:visibility 0.2s linear, opacity 0.2s linear;
}

.accordion-button:focus{
  z-index:2;
}
</style>
<script>


</script>
</head>

<body data-bs-theme="dark">

<div id="aviso" style="right: 10%; width: 80%" class="aviso-panel invisible z-3 position-fixed bottom-0 bg-gradient container-fluid mt-5 mx-auto mb-3 bg-secondary  border border-white rounded"><div class="position-relative container-sm text-justify p-3">
<span id="avisoContent"></span>
</div>
<button id="fechaAviso" class="btn btn-md rounded position-absolute top-0 end-0">X</button>
</div>



<div class="container">
	<br/>
		<h2 class="text-center">Verificadora de regime, substituição e suspensão de pena</h2>
	<br/>
	<hr>
	<br/>
	<h3 class="text-center bg-warning p-4 rounded text-secondary">EM DESENVOLVIMENTO</h3>
	<a href="index.html"><h5 class="text-center">Voltar para a calculadora de dosimetria</h5></a>
	<br/>
	<div class="accordion" id="painel" data-bs-theme="light">
	
	  <div class="accordion-item">
		<div id="panelsStayOpen-collapseZero" class="accordion-collapse collapse show">
		<button value="regimes" class="bt-info rounded-circle btn btn-sm btn-outline-secondary">?</button>
		  <div class="accordion-body">
			<div class="row">
			<div class="col-md-4">
			<div class="input-group">
			  <span class="input-group-text p-3">
			  Anos
			  </span>
			  <input type="number" min="0" max="99" class="form-control" id="anos">
			</div></br>
			</div>
			
			<div class="col-md-4">
			<div class="input-group">
			  <span class="input-group-text p-3">
			  Meses
			  </span>
			  <input type="number" min="0" max="11" class="form-control" id="meses">
			</div></br>
			</div>
			
			<div class="col-md-4">
			<div class="input-group">
			  <span class="input-group-text p-3">
			  Dias
			  </span>
			  <input type="number" min="0" max="29" class="form-control" id="dias">
			</div></br>
			</div>
		  </div>
		  
		  <div class="row">
				<div class="col-md-6 my-auto">
				<div class="input-group">
				  <span class="input-group-text">&nbsp;&nbsp;Reincidente&nbsp;&nbsp;<button value="reinc" class="bt-info rounded-circle btn btn-sm btn-outline-secondary">?</button></span>
				  <select id="reinc" class="form-select p-3">
					<option selected value="0">Não, réu primário</option>
					<option value="1">Sim, reincidente em crime culposo</option>
					<option value="2">Sim, reincidente em crime doloso</option>
				  </select>
				</div><br>
				</div>
				<div class="col-md-6 my-auto">
				<div class="input-group">
				  <span class="input-group-text">Violência ou grave ameaça<button value="violencia" class="bt-info rounded-circle btn btn-sm btn-outline-secondary">?</button></span>
				  <select id="violencia" class="form-select p-3">
					<option selected value="0">Sim, com violência ou grave ameaça</option>
					<option value="1">Não, sem violência ou grave ameaça</option>
				  </select>
				</div><br>
				</div>
				</div>
				<div class="row">
				<div class="col-md-6 my-auto">
				<div class="input-group">
				  <span class="input-group-text">Circunstâncias<button value="circJ" class="bt-info rounded-circle btn btn-sm btn-outline-secondary">?</button></span>
				  <select id="circJ" class="form-select p-3">
				  <option value="0">Positivas</option>
				  <option value="1">Negativas</option>
				  </select>
				</div><br>
				</div>
				<div class="col-md-6 my-auto">
				<div class="input-group">
				  <span class="input-group-text">&nbsp;Crime doloso ou culposo&nbsp;<button value="dolo" class="bt-info rounded-circle btn btn-sm btn-outline-secondary">?</button></span>
				  <select id="dolo" class="form-select p-3">
				  <option value="0">Crime culposo</option>
				  <option value="1">Crime doloso</option>
				  </select>
				</div><br>
				</div>
			</div>
	  </div>
	  </div>
	  </div>
	  </div>
	
	<br>
	<button type="button" onclick="calcular()" class="mx-auto btn btn-primary  btn-lg">Calcular</button>
	<hr>
	
	<div class="accordion d-none" data-bs-theme="light"><div class="accordion-item row"><div class="accordion-body row">
	<ol id = "resultado"></ol>
	</div></div></div>
	<hr/>
	<br/>
	
</div>
<script>

var infos;

$(document).ready(function(){$.get( "https://domillan.github.io/dosimetria/info.json", (data)=>{infos = data;})});

$("select, button, input").click((e) => {$('#aviso').addClass('invisible')});
$("#fechaAviso").click((e) => {$('#aviso').addClass('invisible')});
$(".bt-info").click((e) => aviso(e));

function aviso(e)
{
	html(infos[e.currentTarget.value], '#avisoContent', true);
	$('#aviso').removeClass('invisible');
	$(e.target).addClass('z-1');
}

function html(string, identificador, substituir=false)
{
	if(!substituir) $(identificador).append(string);
	else $(identificador).html(string);
}

function getUrlVars()
{
    var vars = {}, hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        //vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}
const vars = getUrlVars();

$('#anos').val(vars['a'] || 0);
$('#meses').val(vars['m'] || 0);
$('#dias').val(vars['d'] || 0);
$('#reincidente').val(vars['r'] || 0);
</script>
<body>
</html>
